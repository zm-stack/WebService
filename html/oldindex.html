<!DOCTYPE html>
<html>
  <head lang="zh">
    <title>INFOSEC</title>
    <meta charset="UTF-8">
    <!--允许所有域名的脚本 访问该资源-->
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
    <!-- 移动端 浏览器中页面将以原始大小显示-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 优先使用 IE 最新版本和 Chrome -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <!--告诉浏览器这个网址应该用哪个内核渲染，那么浏览器就会在读取到这个标签后，立即切换对应的内核-->
    <meta name="renderer" content="webkit">
    <!--iphone会把一串数字识别为电话号码，点击时会提示是否呼叫，屏蔽这一功能-->
    <meta content="telephone=no" name="format-detection" />
    <!--禁止百度转码-->
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    
    <link rel="stylesheet" href="assets/css/amazeui.min.css"/>
    <link href="https://fonts.googleapis.com/css?family=Poppins:200,300,400,500,600,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Aldrich" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="assets/css/jstree.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/eclipse.css">
    <link type="text/css" rel="stylesheet" href="assets/css/securify.css">

    <style>
      .get {
        background: url(assets/img/bg-star.jpg);
        background-size:100%;
        color: #fff;
        padding: 47px 0;
        font-size: x-large;
      }

      .get-title {
        padding: 20px;
        display: inline-block;
      }

      .get-btn {
        background: #fff;
      }

      .detail {
        background:  url(assets/img/bg-code.jpg);
        background-size:100%;
      }

      .code-editor{
        background: #fff;
      }

      .detail-h2 {
        text-align: center;
        font-size: 150%;
        margin: 40px 0;
      }

      .detail-h3 {
        color: #1f8dd6;
      }

      .detail-p {
        color: #7f8c8d;
      }

      #editor {
        margin: 0;
        display: inline-block;
        width: 870px;
        height: 380px;
      }
      .myMarker {
      position:absolute;
      background:rgba(100,200,100,0.5);
      z-index:20
    }
    .errorHighlight{ 
      position:absolute; 
      z-index:20; 
      background-color:#F4B9B7; 
    }
    </style>
  
  </head>
  
  <body>
    <div class="get">
      <div class="am-g">
        <div class="am-u-lg-12" style="padding-left: 18%">
          <h1 class="get-title">智能合约安全审计平台</h1>
          <p style="padding-left: 20px; ">
            Provide smart contract vulnerability detection and formal verification services
          </p>
          <p style="text-align: right; padding-right: 18%; padding-bottom: 15px">
            <a href="https://github.com/SabakGaara/Re-entrancy" class="am-btn am-btn-default am-round" target="_blank" >说明文档 <i class="am-icon-github am-icon-sm"></i></a>
          </p>
        </div>
      </div>
    </div>

    <!--修改相应JS函数-->
    <div class="detail">
      <div class="am-g">
        <div class="am-u-lg-12" style="text-align: center; font-size: 20px">
          <div class="am-u-sm-12 am-u-md-12 am-margin">
            <!-- <strong>选择区块链平台：</strong>
            <select onchange=select_chain(this) id="select_chain">
              <option value="Ethereum">Ethereum</option>
              <option value="BSC">BSC</option>
              <option value="Fabric">Fabric</option>
            </select> -->
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <strong>选择智能合约语言：</strong>
            <select onchange=select_language(this) id="select_language">
              <option value="Solidity">Solidity</option>
              <option value="Go">Go</option>
            </select>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <strong>选择检测服务：</strong>
            <select onchange=select_service(this) id="select_service">
              <option value="unknown_debug">未知漏洞分析</option>
              <option value="known_debug">已知漏洞检测</option>
              <option value="function_verify">形式化验证</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <div class="detail">
      <div class="am-g am-container">
        <div class="am-u-lg-12 am-margin">
          <div class="am-g code-editor">
            <div class="admin-content">
              <div class="admin-content-body">
                <div class="am-tabs am-margin" data-am-tabs="{noSwipe: 1}">
                  <ul class="am-tabs-nav am-nav am-nav-tabs">
                    <li class="am-active"><a href="#tab_contract">待检测智能合约</a></li>
                  
                    <div class="am-tabs-bd">
                      <div class="am-tab-panel am-active" id="tab_contract">
                        <form class="am-form">
                            <div class="am-u-sm-12 am-u-md-12 am-margin-top">
                              <p><strong>合约名称</strong></p>
                            </div>
                            <div class="am-u-sm-12 am-u-md-12">
                              <textarea rows="1" placeholder="Contract Name" id="contract_name"></textarea>
                            </div>
                            <div class="am-u-sm-12 am-u-md-12 am-margin-top">
                              <p><strong>合约代码</strong></p>
                            </div>
                            <div class="am-u-sm-12 am-u-md-12">
                              <pre id="editor"></pre>
                            </div>
                            <div class="am-u-sm-12 am-u-md-12 am-margin-top" align="center">
                              <button type="button" class="am-btn am-btn-primary am-btn-xl am-round" onclick=analyze_solidity() id="start_button_1"><strong id = "changeState">Analyze Now</strong></button>
                            </div>
                        </form>
                      </div>
                    </div>
                  </ul>
                </div>
              </div>
            </div>
            <!-- <div id="analyze_result" class = "am-g" style="word-break: break-all; word-wrap:break-word; margin: 10px;  padding-left: 7px; background: mistyrose;">
            </div> -->
          </div>
        </div>
      </div>
    </div>

    <div class="detail">
      <div class="am-g am-container">
        <div class="am-u-lg-12 am-margin">
          <div class="am-g code-editor">
            <div class="admin-content">
              <div class="admin-content-body">
                <div class="am-tabs am-margin" data-am-tabs="{noSwipe: 1}">
                  <ul class="am-tabs-nav am-nav am-nav-tabs">
                    <li class="am-active"><a href="#tab_solidity">检测结果</a></li>
                  </ul>
                  <div class="am-tabs-bd">
                    <div class="am-tab-panel am-active" id="tab_solidity">
                      <form class="am-form">
                          <div class="am-u-sm-12 am-u-md-12 am-margin-top">
                            <p><strong>总体情况</strong></p>
                          </div>
                          <div class="am-u-sm-12 am-u-md-12">
                            <textarea rows="1" placeholder="Contract Name" id="solidity_name"></textarea>
                          </div>
                          <div class="am-u-sm-12 am-u-md-12 am-margin-top">
                            <p><strong>详细说明</strong></p>
                          </div>
                          <div class="am-u-sm-12 am-u-md-12">
                            <pre id="editor"></pre>
                          </div>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
    <script>
        var editor = ace.edit("editor");
        editor.setTheme("ace/theme/dreamweaver");
        editor.session.setMode("ace/mode/solidity");
        editor.setFontSize(13);
        document.getElementById("solidity_name").value="generic_holder";
        editor.setValue("000000000000000000000000");

        var erroneousLine; 

        function highlightError(lineNumber) { 
              var Range = ace.require("ace/range").Range 
              erroneousLine = editor.session.addMarker(new Range(lineNumber, 0, lineNumber, 144), "errorHighlight", "fullLine"); 
        } 
        function unhighlightError(){ 
              editor.getSession().removeMarker(erroneousLine); 
        } 

    </script>
    <script src="assets/js/taint_select.js"></script>
    <script src="assets/js/taint_analyze.js"></script>
    <script type="text/javascript">select_sample(document.getElementById("sample_select"));</script>
    <script src="http://libs.baidu.com/jquery/1.11.1/jquery.min.js"></script>
    <script src="http://cdn.staticfile.org/modernizr/2.8.3/modernizr.js"></script>
    <script src="assets/js/amazeui.ie8polyfill.min.js"></script>

    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/amazeui.min.js"></script>
  </body>
</html>
